{% extends 'base.html' %}
{% block content %}
<div id="vertical-navbar">
    <nav>
        <ul>
            <li>
                <form action="/product_categories/{{product.product_category.name}}/show">
                <h2>Search by product category</h2>
                <label for="product_category_id">Select a product category:</label>

                <select name="product_category_id" id="product_category_id">
                    {% for product in products %}
                    <option value="{{ product.product_category.name }}">{{ product.product_category.name }}</option>
                    {% endfor %}
                </select>
                <input type="submit" value="Search">
                </form>
            </li>

        </ul>
    </nav>
   
</div>
<div>
<p class="btn">
    <a class="btn" href="/products/new">New Product</a>
</p>
<table>
    <tr>
        <th><b>Category</b></th>
        <th><b>Name</b></th>
        <th>Description</th>
        <th>Quantity</th>
        <th>Purchase Price</th>
        <th>Selling Price</th>
        <th>Date and Time</th>
        <th>Manufacturer</th>
        <th>Stock Level</th>
    </tr>
    {% for product in products %}
    <tr>
        <td>{{ product.product_category.name }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.description }}</td>
        <td>{{ product.quantity }}</td>
        <td>{{ product.purchase_price }}</td>
        <td>{{ product.selling_price }}</td>
        <td>{{ product.date_and_time }}</td>
        <td>a{{ product.manufacturer.name }}</td>
        <td>
            {% if product.quantity<=0 %}
                <p>Out of stock</p>
            {% elif product.quantity <=10 %}
                <p>Low stock</p>
            {% else %}
                <p>&#9989</p>
            {% endif %}
        </td>
        <td><a href="/products/{{product.id}}/edit">Edit</a></td>
        <td><a href="/products/{{product.id}}/delete">Delete</a></td>
    {% endfor %}
    </tr>
</table>
</div>
{% endblock content %}